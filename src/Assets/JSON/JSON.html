<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>JSON</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="JSON.css" />
  <script src="main.js"></script>
</head>

<body>
  <table id="table">
    <tr>
      <th>Etunimi</th>
      <th>Sukunimi</th>
      <th>Ikä</th>
      <th>Osoite</th>
      <th>puhelin(koti)</th>
      <th>puhelin(työ)</th>
    </tr>
  </table>

  <button href="./fillarit.html"><a href="./fillarit.html"><strong>ALEPAPYÖRÄT</strong></a></button>

  <script>
    let xmlhttp = new XMLHttpRequest();
    let url = "tyontekijat.json"; // 2
    xmlhttp.onreadystatechange = function () {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        let myArr = JSON.parse(xmlhttp.responseText);
        myFunction(myArr.tyontekijat); // 3
      }
    }
    xmlhttp.open("GET", url, true); // 4
    xmlhttp.send();
    function myFunction(arr) { // 5
      const size = null
      let table = document.getElementById("table")
      arr.forEach(element => {
        let row = table.insertRow(-1);
        let cell;
        for (let index = 0; index < Object.size(element); index++) {
          let values = Object.values(element)
          cell = row.insertCell(index);
          cell.innerHTML = values[index]
        }
      });
    }


    //This just returns the length of object
    Object.size = function (obj) {
      let size = 0, key;
      for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
      }
      return size;
    };

  </script>
</body>

</html>